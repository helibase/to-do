<button class="btn btn-outline-dark d-lg-none sidebar-toggle" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar-offcanvas">
    <i class="fas fa-bars"></i>
</button>
<div class="d-none d-lg-block">
    <div id="sidebar">
        <div class="text-center mb-4">
            {% if session.get('user', {}).get('photo_url') %}
                <img src="{{ session['user']['photo_url'] }}" class="profile-image" alt="Profile Picture">
            {% else %}
                <img src="{{ url_for('static', filename='images/default-avatar.png') }}" class="profile-image" alt="Default Avatar">
            {% endif %}
            <h3 class="username">{{ session.get('user', {}).get('display_name') or session.get('user', {}).get('user_email') }}</h3>
            <p class="user-title">{{ session.get('user', {}).get('user_email', 'Usuario') }}</p>
        </div>
        
        <p class="menu-label">Menu</p>
        <nav class="nav flex-column mb-4">
            <a class="nav-link {% if request.endpoint == 'profile_route' %}active{% endif %}" href="{{ url_for('profile_route') }}">
                <i class="fas fa-user"></i> Profile
            </a>
                <form action="{{ url_for('logout_route') }}" method="post">
                <a href="#" class="nav-link" onclick="this.closest('form').submit(); return confirm('Are you sure you want to logout?');">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
                </form>
        </nav>
    </div>
</div>

<div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="sidebar-offcanvas">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="text-center mb-4">
            {% if session.get('user', {}).get('photo_url') %}
                <img src="{{ session['user']['photo_url'] }}" class="profile-image" alt="Profile Picture">
            {% else %}
                <img src="{{ url_for('static', filename='images/default-avatar.png') }}" class="profile-image" alt="Default Avatar">
            {% endif %}
            <h3 class="username">{{ session.get('user', {}).get('display_name') or session.get('user', {}).get('user_email') }}</h3>
            <p class="user-title">{{ session.get('user', {}).get('user_email', 'Usuario') }}</p>
        </div>
        
        <p class="menu-label">Menu</p>
        <nav class="nav flex-column mb-4">
            <a class="nav-link {% if request.endpoint == 'profile_route' %}active{% endif %}" href="{{ url_for('profile_route') }}">
                <i class="fas fa-user"></i> Profile
            </a>
            <form action="{{ url_for('logout_route') }}" method="post">
                <a href="#" class="nav-link" onclick="this.closest('form').submit(); return confirm('Are you sure you want to logout?');">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </form>
        </nav>
    </div>
</div>